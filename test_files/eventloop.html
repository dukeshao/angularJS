<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
  </head>

  <body>
    <script>
      console.log("script start")
      setTimeout(function () {
        console.log("a")
        setTimeout(function () {
          console.log("b")
        })
        new Promise(function (resolve) {
          console.log("c")
          // resolve();
        }).then(function () {
          console.log("d")
          setTimeout(function () {
            console.log("e")
          })
        })
      })
      new Promise(function (resolve) {
        console.log("f")
        resolve()
      }).then(function () {
        console.log("g")
      })
      setTimeout(function () {
        console.log("h")
        setTimeout(function () {
          console.log("i")
        })
        new Promise(function (resolve) {
          console.log("j")
          resolve();
        }).then(function () {
          console.log("k")
          setTimeout(function () {
            console.log("l")
            new Promise(function (resolve) {
              console.log("m")
              resolve()
            }).then(function () {
              console.log("n")
              setTimeout(function () {
                console.log("o")
              })
            })
          })
        })
      })
  //第一次宏任务打印: "script start" "f"
  //第一次微任务打印: "g"
  //第二次宏任务打印: "a" "c"
  //第二次微任务打印: "d"
  //第三次宏任务打印: "h" "j"
  //第三次微任务打印: "k"
  //第四次宏任务打印: "b"
  //第四次微任务打印:
  //第五次宏任务打印: "e"
  //第五次微任务打印: 
  //第六次宏任务打印: "i"
  //第六次微任务打印:
  //第七次宏任务打印: "l" "m"
  //第七次微任务打印: "n"
  //第八次宏任务打印: "o"

  //最终打印顺序为: 
  //"script start" "f" "g" "a" "c" "d" "h" "j" "k" "b" "e" "i" "l" "m" "n" "o"
    </script>
  </body>

</html>